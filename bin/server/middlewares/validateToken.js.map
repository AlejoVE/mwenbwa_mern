{"version":3,"sources":["../../../src/server/middlewares/validateToken.js"],"names":["response","require","jwt","validateJWT","req","res","next","token","header","status","json","ok","msg","payload","verify","process","env","JWT_SECRET_SEED","uid","userId","username","userName","error","module","exports"],"mappings":";;AAAA,MAAM;AAACA,EAAAA;AAAD,IAAaC,OAAO,CAAC,SAAD,CAA1B;;AACA,MAAMC,GAAG,GAAGD,OAAO,CAAC,cAAD,CAAnB;;AAEA,MAAME,WAAW,GAAG,CAACC,GAAD,EAAMC,GAAG,GAAGL,QAAZ,EAAsBM,IAAtB,KAA+B;AAE/C,QAAMC,KAAK,GAAGH,GAAG,CAACI,MAAJ,CAAW,SAAX,CAAd;;AAEA,MAAG,CAACD,KAAJ,EAAU;AACN,WAAOF,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACxBC,MAAAA,EAAE,EAAE,KADoB;AAExBC,MAAAA,GAAG,EAAE;AAFmB,KAArB,CAAP;AAIH;;AAED,MAAI;AAEA,UAAMC,OAAO,GAAGX,GAAG,CAACY,MAAJ,CACZP,KADY,EAEZQ,OAAO,CAACC,GAAR,CAAYC,eAFA,CAAhB;AAKAb,IAAAA,GAAG,CAACc,GAAJ,GAAUL,OAAO,CAACM,MAAlB;AACAf,IAAAA,GAAG,CAACgB,QAAJ,GAAeP,OAAO,CAACQ,QAAvB;AAEH,GAVD,CAUE,OAAOC,KAAP,EAAc;AACZ,WAAOjB,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACxBC,MAAAA,EAAE,EAAE,KADoB;AAExBC,MAAAA,GAAG,EAAE;AAFmB,KAArB,CAAP;AAIH;;AACDN,EAAAA,IAAI;AACP,CA5BD;;AA8BAiB,MAAM,CAACC,OAAP,GAAiB;AACbrB,EAAAA;AADa,CAAjB","sourcesContent":["const {response} = require('express');\nconst jwt = require('jsonwebtoken');\n\nconst validateJWT = (req, res = response, next) => {\n     \n    const token = req.header('x-token');\n\n    if(!token){\n        return res.status(401).json({\n            ok: false,\n            msg: 'Token missing'\n        })\n    }\n\n    try {\n\n        const payload = jwt.verify(\n            token,\n            process.env.JWT_SECRET_SEED\n        )\n        \n        req.uid = payload.userId;\n        req.username = payload.userName;\n        \n    } catch (error) {\n        return res.status(401).json({\n            ok: false,\n            msg: 'Invalid Token'\n        })\n    }\n    next();\n};\n\nmodule.exports = {\n    validateJWT\n}"],"file":"validateToken.js"}